---@diagnostic disable: undefined-global, lowercase-global

require("Util/utils")

local waka = {
    548471420,
    -30654421,
    -2113865699,
    1681920018,
    1096448327,
    113023613,
    42967925,
    1746765664,
    538193013,
    1163337421,
    1110452930,
    -596760615,
    -140109523,
    1398154308,
    181375724,
    672437644,
    -1765092612,
    -338166051,
    2100923829,
    -1822401313,
    1242664595,
    -1962062913,
    -2085699648,
    -1185502051,
    -193885642,
    1401157001,
    -459327862,
    -2001677186,
    -419652151,
    85920017,
    -1891171016,
    1227699211,
    414506075,
    1519903406,
    871267300,
    -2029579257,
    -1453392398,
    1192608757,
    2067191610,
    1694464420,
    -1518599654,
    1397900875,
    -1548871816,
    -852914485,
    -333917558,
    -644115601,
    1875524648,
    1765085190,
    -91833327,
    886761285,
    1900384925,
    -1328646658,
    134199208,
    -1392241127,
    -795380017,
    1804829460,
    1370461707,
    1813766002,
    -964882004,
    2080651008,
    -860929776,
    1999063780,
    1456052554,
    1167971813,
    -1963501380,
    -162943635,
    -1047334626,
    -580709734,
    448968075,
    -672300651,
    1009548335,
    2034045540,
    217196385,
    1607508898,
    1368347173,
    1772461754,
    -492741651,
    -1230153214,
    2092740896,
    -876146989,
    477242315,
    1903858674,
    1128918904,
    -519597839,
    1077951879,
    285546291,
    857538507,
    -328486618,
    2118577282,
    1810679938,
    -1322082704,
    518811989,
    -1578682814,
    1807254743,
    2144693378,
    1200439149,
    -513394492,
    2041060862,
    -1472351847,
    -484141204,
    -141450727,
    -1575137150,
    854806881,
    -839043921,
    -2105209800,
    -1001891935,
    -1593201907,
    -851885842,
    -970362313,
    -382052039,
    -871545888,
    2060563275,
    309814753,
    -285454749,
    755923450,
    1304332204,
    -381818092,
    1819411281,
    1250480109,
    -766974585,
    1264221127,
    1541446437,
    -2044863341,
    -1424012222,
    -1127353498,
    2005059642,
    167413139,
    669039275,
    -507112185,
    -1479027099,
    -1090858280,
    186548319,
    -1878484856,
    -16793987,
    1322812076,
    898343266,
    -438023591,
    -2048374263,
    -1609136786,
    434570842,
    937151636,
    1272793301,
    988586503,
    -1173163558,
    -1714789749,
    1589823260,
    -23082252,
    1041200857,
    -1555358611,
    127955867,
    375962343,
    1001517091,
    1345672987,
    -1168208444,
    -730912208,
    2084633812,
    792153085,
    1473913668,
    -343495611,
    1491806827,
    1039282949,
    -1460955723,
    317177044,
    -1834446996,
    1552900972,
    -2028335784,
    -241418449,
    -1653861842,
    -259156293,
    1594928808,
    -1556962447,
    1640286562,
    -1139254401,
    -949018811,
    1803131174,
    -71273283,
    -119249570,
    -53458173,
    -1003348271,
    -1123400822,
    1772495870,
    -1701192924,
    -1218087738,
    -10982782,
    814496833,
    -1094380288,
    319685114,
    -323171360,
    820416549,
    1835182208,
    337732417,
    -124020592,
    1221375594,
    2144481042,
    -749491288,
    -882028108,
    -1370028781,
    -1261736727,
    1037705593,
    1377857852,
    1168623138,
    -310617732,
    908767058,
    1409556665,
    -1387723751,
    -1492841786,
    1674476795,
    232443159,
    178524407,
    986260144,
    653628905,
    -168599209,
    474413179,
    -2051844999,
    1560973005,
    -904555865,
    879177392,
    -2060526162,
    -994591791,
    388881138,
    1674317759,
    1486774330,
    489739448,
    -398684455,
    -841455067,
    1379379239,
    2046296859,
    1311159119,
    -760942281,
    -1831959078,
    1848110702,
    -364713137,
    -1643482755,
    -1464365333,
    1327169001,
    1620260542,
    245065909,
    -1597942809,
    1071490035,
    1920583171,
    265836764,
    1303606785,
    267489225,
    1569236577,
    -469493996,
    360244585,
    1134514966,
    -2139562045,
    279717272,
    10138018,
    -725780952,
    396538098,
    -1029914669,
    -1296375264,
    -805921310,
    -468188833,
    1923972962,
    -444617715,
    -248680084,
    -1419450740,
    1279059857,
    -150763833,
    -720665383,
    -278036454,
    -1389482213,
    -1954654708,
    -204643402,
    -1496673706,
    1292306623,
    1950531948,
    -1990614866,
    1124104301,
    -646004404,
    -1216295492,
    -859612223,
    -1781653678,
    1083015459,
    -933673939,
    434937615,
    -957260626,
    -975458684,
    -1640403704,
    -1322731185,
    -1129868216,
    316066012,
    1454834612,
    700267046,
    -1730284249,
    1074803562,
    178476176,
    -509252369,
    1304577008,
    -102043551,
    -1526561203,
    -1612608404,
    895397362,
    1802646519,
    1268038438,
    1927489513,
    1046014587,
    549145155,
    -1237225255,
    1500075603,
    81880333,
    -1484508675,
    -2059117919,
    1332590686,
    -910497748,
    -1141914502,
    -1582289420,
    -76043076,
    2144523214,
    243072129,
    2064487849,
    435675531,
    -500923695,
    1336084487,
    323981539,
    567662973,
    -1571441360,
    -1054040893,
    843316754,
    169410705,
    491906476,
    796658339,
    974054812,
    508339812,
    431653434,
    1341265547,
    -1168222636,
    -715264067,
    1121720242,
    931417473,
    -583098065,
    1586286277,
    -1330848029,
    -1448015548,
    561154955,
    -1471373324,
    1306214888,
    -91898414,
    90440793,
    914476312,
    815640525,
    -394088790,
    1858712297,
    -1743542712,
    49863291,
    1025036241,
    -508465573,
    1810531023,
    2119903152,
    507886635,
    -1057685265,
    915462795,
    -1069140561,
    1491410017,
    -1601139550,
    -290401917,
    -1357080740,
    -299190545,
    -1443768844,
    1354970087,
    1796894334,
    392606458,
    697566862,
    1402665684,
    -1694531511,
    393633835,
    1292973690,
    1605689751,
    1883636994,
    1814318034,
    -50961790,
    -93722397,
    1775863255,
    125899875,
    -1217949151,
}

local crash = {
    -877478386,
    2099682835,
}

local crash2 = {
    -877478386,
    -442313018,
}

local advanced = {
    1641462412,
    1030400667,
    -1254331310,
    -1763555241,
    1033245328,
    -1660661558,
    390902130,
    2069146067,
}


network_bail = function(pid)
    mem = memory.read_int(memory.script_global(1892703 + (1 + (pid * 599) + 510)))

    util.trigger_script_event(1 << pid, {1674887089, pid, mem})

    notify("Bailing " .. PLAYER.GET_PLAYER_NAME(pid), "Kick", "CHAR_MP_STRIPCLUB_PR", "~b~")
    log("Bailing (Username-->" .. PLAYER.GET_PLAYER_NAME(pid) .. " UID-->" .. pid .. ")")
end

waka_kick = function(pid)
    for i, v in pairs(waka) do
        arg1 = math.random(-2147483647, 2147483647)
        arg2 = math.random(-1987543, 1987543)
        arg3 = math.random(-19, 19)

        util.trigger_script_event(1 << pid, {v, pid, arg1, arg3, arg2, arg2, arg1, arg1, arg3, arg3, arg1, arg3, arg2, arg3, arg1, arg1, arg2, arg3, arg1, arg2, arg2, arg3, arg3})
        util.yield()
    end

    notify("Waka " .. PLAYER.GET_PLAYER_NAME(pid), "Kick", "CHAR_MP_STRIPCLUB_PR", "~b~")
    log("Waka (Username-->" .. PLAYER.GET_PLAYER_NAME(pid) .. " UID-->" .. pid .. ") Waka waka, eh eh Tsamina mina zangalewa Anawa ah ah")
end

waka_crash = function(pid)
    for i, v in pairs(crash) do
        request_stream_of_entity(v, 1)
    end

    for i = 1, 2 do
        local coords = player_coords(pid)

        trailer = entities.create_vehicle(-877478386, coords, 0.0)
        object = entities.create_object(2099682835, coords, 0.0)

        ENTITY.SET_ENTITY_VISIBLE(trailer, false, 0)
        ENTITY.SET_ENTITY_VISIBLE(object, false, 0)

        ENTITY.SET_ENTITY_VELOCITY(trailer, 5, 3, 3)
        ENTITY.SET_ENTITY_VELOCITY(object, 3, 4, 5)

        for i = 1, 3 do
            ENTITY.ATTACH_ENTITY_TO_ENTITY(trailer, object, 0, 0, 0, 0, 0, 0, 0, true, true, false, 0, true)
            coords.x = coords.x
            coords.y = coords.y + 20
            coords.z = coords.z
            local vehicle = entities.create_vehicle(-877478386, coords, 0.0)
            ENTITY.APPLY_FORCE_TO_ENTITY_CENTER_OF_MASS(vehicle, 1, 0, -100, 0, true, false, true)
            util.yield(200)
            ENTITY.DETACH_ENTITY(trailer)
        end

        entities.delete_by_handle(trailer)
        entities.delete_by_handle(object)
    end
end

ducky_crash = function(pid)
    for i, v in pairs(crash2) do
        request_stream_of_entity(v, 1)
    end

    for i = 1, 2 do
        local coords = player_coords(pid)

        trailer = entities.create_vehicle(-877478386, coords, 0.0)
        towtruck = entities.create_object(-442313018, coords, 0.0)

        ENTITY.SET_ENTITY_VISIBLE(trailer, false, 0)
        ENTITY.SET_ENTITY_VISIBLE(towtruck, false, 0)

        ENTITY.SET_ENTITY_VELOCITY(trailer, 5, 3, 3)
        ENTITY.SET_ENTITY_VELOCITY(towtruck, 3, 4, 5)

        for i = 1, 3 do
            ENTITY.ATTACH_ENTITY_TO_ENTITY(trailer, towtruck, 0, 0, 0, 0, 0, 0, 0, true, true, false, 0, true)
            ENTITY.APPLY_FORCE_TO_ENTITY_CENTER_OF_MASS(trailer, 1, 0, -100, 0, true, false, true)
            util.yield(200)
            ENTITY.DETACH_ENTITY(trailer)
        end

        entities.delete_by_handle(trailer)
        entities.delete_by_handle(towtruck)
    end
end

croc_crash = function()

    for i, v in pairs(advanced) do
        request_stream_of_entity(v, 1)
    end

    util.yield(1000)

    local player = players.list(false, true, true)
    local created_list = {
        create = {},
        ["count"] = 0
    }

    local vehicle = entities.get_user_vehicle_as_handle()

    if vehicle == 0 then
        return print("must be in a vehicle")
    end

    ENTITY.SET_ENTITY_PROOFS(vehicle, true, true, true, true, true, true, true, true)
    

    clear_list = function()
        for i, v in pairs(created_list.create) do
            entities.delete_by_handle(v)
            table.remove(created_list.create, i)
            util.yield()
        end
        created_list["count"] = 0
    end

    repeat
        if created_list["count"] > 32 then
            clear_list()
        end

        for i, v in pairs(player) do
            local coords = player_coords(v)

            ENTITY.SET_ENTITY_COORDS_NO_OFFSET(vehicle, coords.x, coords.y, coords.z + (i * 5), true, false, false)

            local created = entities.create_vehicle(advanced[math.random(1, #advanced)], coords, 0.0)
            table.insert(created_list.create, created)

            ENTITY.ATTACH_ENTITY_TO_ENTITY_PHYSICALLY(created_list.create[created_list["count"]], vehicle, 0, 0, 0, 0, 5 + (2 * i), 0, 0, 0, (i * 5), (i * -5), (i * -15), 1000, true,true, true, true, 2) -- crash reason

            ENTITY.SET_ENTITY_VELOCITY(created_list.create[created_list["count"]], 0, 0, 0)
            ENTITY.SET_ENTITY_ROTATION(created_list.create[created_list["count"]], 0, 0, 0, 2, true)
            util.yield()
        end


    until not players.exists(players.user())
end

croc_crash_2 = function()

    for i, v in pairs(advanced) do
        request_stream_of_entity(v, 1)
    end

    util.yield(1000)

    local player = players.list(false, true, true)
    local created_list = {
        create = {},
        ["count"] = 0
    }

    local local_ped = players.user_ped()

    ENTITY.SET_ENTITY_PROOFS(local_ped, true, true, true, true, true, true, true, true)
    

    clear_list = function()
        for i, v in pairs(created_list.create) do
            entities.delete_by_handle(v)
            table.remove(created_list.create, i)
            util.yield()
        end
        created_list["count"] = 0
    end

    repeat
        if created_list["count"] > 32 then
            clear_list()
        end

        for i, v in pairs(player) do
            local coords = player_coords(v)

            ENTITY.SET_ENTITY_COORDS_NO_OFFSET(vehicle, coords.x, coords.y, coords.z + (i * 5), true, false, false)

            local created = entities.create_vehicle(advanced[math.random(1, #advanced)], coords, 0.0)
            table.insert(created_list.create, created)
            created_list["count"] = created_list["count"] + 1

            ENTITY.ATTACH_ENTITY_TO_ENTITY_PHYSICALLY(created_list.create[created_list["count"]], local_ped, 0, 0, 0, 0, 5 + (2 * i), 0, 0, 0, (i * 5), (i * -5), (i * -15), 1000, true,true, true, true, 2) -- crash reason

            ENTITY.SET_ENTITY_VELOCITY(created_list.create[created_list["count"]], 0, 0, 0)
            ENTITY.SET_ENTITY_ROTATION(created_list.create[created_list["count"]], 0, 0, 0, 2, true)
            util.yield()
        end
        util.yield()


    until not players.exists(players.user())
end